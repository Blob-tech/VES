<mat-card class="orgForm" >
    <div class="alert alert-danger alert-dismissible fade-in" [hidden] = " error ? false : true">
        <button type="button" class="close" data-dismiss="alert" (click) = "dismissErrorAlert()">&times;</button>
        <strong>Error!</strong> {{error}}
      </div>
      <mat-divider></mat-divider>
      <div class="alert alert-success alert-dismissible fade-in" [hidden] = " message ? false : true">
            <button type="button" class="close" data-dismiss="alert" (click) = "dismissMessageAlert()">&times;</button>
            <strong>Success!</strong> {{message}}
          </div>
          <br>
    <mat-card-header class="header">
        <mat-card-title><h2>Update Institute/Organisation</h2><br>
            <h3>Institute Id : {{current_institute.organisation_id}}</h3></mat-card-title>
            <mat-card-subtitle>All fields marked * are required</mat-card-subtitle>
    </mat-card-header>
    <div style="display: inline; margin:1rem">
            <img class="logo" src="{{imgUrl + current_institute.avatar}}">
        </div>
        <button (click)="openEditLogo()" mat-raised-button><mat-icon>camera_alt</mat-icon> Edit Logo</button>
<form [formGroup]="editOrganisationForm" (ngSubmit)="update(current_institute.organisation_id)" >
    <mat-form-field class="form-group" appearance="outline" >
        <mat-label>Client Short Id</mat-label>
        <input matInput formControlName="client_id"   placeholder="Enter Institute Short Id">
        <mat-hint align="end">{{client_id.value?.length || 0}}/10</mat-hint>
        <mat-error *ngIf="client_id.hasError('required')">Value is required</mat-error>
        <mat-error *ngIf="client_id.hasError('maxlength')">Character Limit Exceeded</mat-error>
    </mat-form-field>
    <mat-form-field class="form-group" appearance="outline">
        <mat-label>Institute/Organisation Name</mat-label>
        <input matInput formControlName="organisation_name" required placeholder="Enter Institute/Organisation name" >
        <mat-hint>Institute/Organisation name should not exceed more than 200 characters</mat-hint>
        <mat-hint align="end">{{organisation_name.value?.length || 0}}/200</mat-hint>
        <mat-error *ngIf="organisation_name.hasError('required')">Value is required</mat-error>
        <mat-error *ngIf="organisation_name.hasError('maxlength')">Character Limit Exceeded</mat-error>
    </mat-form-field>
    <mat-form-field class="form-group" appearance="outline">
        <mat-label>Organisation contact email</mat-label>
        <input matInput formControlName="contact_email" required placeholder="Enter subscriber mail" >
        <mat-hint>Please enter a valid contact_email. This mail will be used for all future communications</mat-hint>
        <mat-error *ngIf="contact_email.hasError('required')">Value is required</mat-error>
        <mat-error *ngIf="contact_email.hasError('pattern')">Please enter a valid contact_email in the format xyz@abc.com</mat-error>
    </mat-form-field>
    <mat-form-field class="form-group" appearance="outline">
        <mat-label>Organisation Mobile/Phone Number</mat-label>
         <span matPrefix>+91 &nbsp;</span>
        <input matInput type="tel" formControlName="contact_phone" required placeholder="Enter Organisation/Institute mobile/phone number" maxlength="10">
        <mat-hint>Enter a 10 digit valid telephone number</mat-hint>
        <mat-error *ngIf="contact_phone.hasError('required')">Value is required</mat-error>
    </mat-form-field>
    <mat-form-field class="form-group" appearance="outline" style="width : 90%">
            <mat-label>Organisation/Institute Contact Person</mat-label>
            <input matInput  formControlName="contact_person" required placeholder="Enter Organisation/Institute contact person">
            <mat-hint align="end">{{contact_person.value?.length || 0}}/100</mat-hint>
            <mat-error *ngIf="contact_person.hasError('required')">Value is required</mat-error>
            <mat-error *ngIf="contact_person.hasError('maxlength')">Character Limit Exceeded</mat-error>
        </mat-form-field>
        <mat-form-field class="form-group" appearance="outline" style="width:90%">
            <mat-label>Organisation/Institute Address</mat-label>
            <textarea matInput formControlName="address"  placeholder="Enter Organisation/Institute address" ></textarea>
            <mat-hint>Organisation/Institute address should not exceed more than 500 characters</mat-hint>
            <!--mat-hint align="end">{{name.value?.length || 0}}/500</mat-hint-->
            <mat-error *ngIf="address.hasError('maxlength')">Character Limit Exceeded</mat-error>
        </mat-form-field>
        <br>
                    <button type="submit"  mat-raised-button style="margin-right: 1rem;" color="accent"
                    [disabled]="submitDisabled()">Update</button>
                    <button type="reset" mat-raised-button>Reset</button>

</form>
<br>
<div class="alert alert-danger alert-dismissible fade-in" [hidden] = " error ? false : true">
    <button type="button" class="close" data-dismiss="alert" (click) = "dismissErrorAlert()">&times;</button>
    <strong>Error!</strong> {{error}}
  </div>
  <mat-divider></mat-divider>
  <div class="alert alert-success alert-dismissible fade-in" [hidden] = " message ? false : true">
        <button type="button" class="close" data-dismiss="alert" (click) = "dismissMessageAlert()">&times;</button>
        <strong>Success!</strong> {{message}}
      </div>
</mat-card>

<!-- Edit Image Modal-->
<!--ng-template #edit_image let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Edit Institute Logo</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
            <mat-form-field class="form-group" style=" width: 30%; display: inline-block; margin-right: 100px;"  appearance="outline">
                    <mat-label>Institute Logo</mat-label>
                    <ngx-mat-file-input #removableInput [(formControl)]="cover" accept=".jpg,.jpeg,.png"  placeholder="Browse Image"
                    (change)="onSelectThumbnail($event)" required ></ngx-mat-file-input>
                    <button mat-icon-button matSuffix *ngIf="!removableInput.empty" (click)="removableInput.clear($event)">
                      <mat-icon>clear</mat-icon>
                    </button>
                    <mat-hint>Images in .jpg, .jpeg  or .png only allowed </mat-hint>
                    <mat-error *ngIf="cover.hasError('required')">
                      Please select a file
                    </mat-error>
                    <mat-error *ngIf="cover.hasError('maxContentSize')">
                      The total size must not exceed {{configParams.img_size}} MB).
                    </mat-error>
                  </mat-form-field>
            
            <img style="height: 200px; width: 150px;"  mat-card-image src="{{url}}" alt="Chapter Photo"><br>
                            <mat-hint>Images in .jpg, .jpeg and .png only allowed </mat-hint>
                            <mat-progress-bar mode="determinate" value="{{thumbnailprogress}}"></mat-progress-bar>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="save_thumbnail()" [disabled]="cover.status === 'INVALID'" >Save</button>
    </div>
  </ng-template-->

  <ng-template #callEditLogo> 
      <h1 mat-dialog-title>Edit Institute Logo</h1>
      <div mat-dialog-content>
                  <mat-form-field class="form-group" style=" width: 90%; display: inline-block; margin-right: 100px;"  appearance="outline">
                          <mat-label>Logo Image</mat-label>
                          <ngx-mat-file-input #removableInput [(formControl)]="logo" accept=".jpg,.jpeg,.png"  placeholder="Browse Image"
                          (change)="onSelectThumbnail($event)" required ></ngx-mat-file-input>
                          <button mat-icon-button matSuffix *ngIf="!removableInput.empty" (click)="removableInput.clear($event)">
                            <mat-icon>clear</mat-icon>
                          </button>
                          <mat-hint>Images in .jpg, .jpeg  or .png only allowed </mat-hint>
                          <mat-error *ngIf="logo.hasError('required')">
                            Please select a file
                          </mat-error>
                          <mat-error *ngIf="logo.hasError('maxContentSize')">
                            The total size must not exceed {{configParams.logo_size}} MB).
                          </mat-error>
                        </mat-form-field>
                  
                  <img style="height: 200px; width: 150px; margin-left : 10px;"  mat-card-image src="{{url}}" alt="Institute Logo"><br>
                                  <mat-hint>Images in .jpg, .jpeg and .png only allowed </mat-hint>
                                  <mat-progress-bar mode="determinate" value="{{thumbnailprogress}}"></mat-progress-bar>
          
      
      </div>
      <div mat-dialog-actions>
        <button mat-raised-button color="primary" (click)="save_logo()" type="submit" [disabled]="logo.status === 'INVALID'">Save</button>
        <button mat-raised-button color="warn" mat-dialog-close>Close</button>
      </div>
      
  </ng-template>
 

